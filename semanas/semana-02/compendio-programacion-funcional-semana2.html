<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semana 2 - Funciones y Programación Funcional</title>
    
    <!-- Reveal.js -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/dist/theme/white.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/plugin/highlight/monokai.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        :root {
            --primary-color: #003f72;
            --secondary-color: #e9ab21;
            --accent-color: #2c3e50;
        }
        
        .reveal {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .reveal h1, .reveal h2, .reveal h3 {
            color: var(--primary-color);
        }
        
        .highlight {
            background: linear-gradient(120deg, rgba(233, 171, 33, 0.3) 0%, rgba(233, 171, 33, 0.1) 100%);
            padding: 0.2em 0.4em;
            border-radius: 4px;
        }
        
        .concept-box {
            background: rgba(0, 63, 114, 0.05);
            border-left: 4px solid var(--primary-color);
            padding: 1em;
            margin: 1em 0;
            border-radius: 0 8px 8px 0;
        }
        
        .two-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2em;
            align-items: start;
        }
        
        .example-box {
            background: rgba(46, 204, 113, 0.1);
            border: 1px solid rgba(46, 204, 113, 0.3);
            padding: 1em;
            border-radius: 8px;
            margin: 1em 0;
        }
        
        .warning-box {
            background: rgba(231, 76, 60, 0.1);
            border: 1px solid rgba(231, 76, 60, 0.3);
            padding: 1em;
            border-radius: 8px;
            margin: 1em 0;
        }
        
        .reveal pre {
            font-size: 0.5em;
            line-height: 1.2;
        }
        
        .reveal code {
            font-size: 0.9em;
        }
        
        .icon-title {
            display: flex;
            align-items: center;
            gap: 0.5em;
        }
        
        .comparison-table {
            font-size: 0.8em;
            margin: 1em 0;
        }
        
        .comparison-table th {
            background: var(--primary-color);
            color: white;
            padding: 0.5em;
        }
        
        .comparison-table td {
            padding: 0.5em;
            border: 1px solid #ddd;
        }
    </style>
</head>

<body>
    <div class="reveal">
        <div class="slides">
            
            <!-- Portada -->
            <section data-background="linear-gradient(135deg, rgba(0,63,114,0.1) 0%, rgba(233,171,33,0.1) 100%)">
                <h1>Funciones y Programación Funcional</h1>
                <h3 class="highlight">Semana 2</h3>
                <div class="concept-box">
                    <strong>Objetivo:</strong> Relacionar la noción matemática de función con su uso en programación, 
                    distinguir funciones puras e impuras y practicar expresiones lambda.
                </div>
                <p><small>Universidad Técnica Particular de Loja</small></p>
            </section>

            <!-- Agenda -->
            <section>
                <h2 class="icon-title"><i class="fa-solid fa-list-check"></i> Agenda</h2>
                <ol>
                    <li>Funciones: Matemáticas vs Programación</li>
                    <li>Programación Funcional: Conceptos Clave</li>
                    <li>Funciones Puras vs Impuras</li>
                    <li>Funciones vs Métodos</li>
                    <li>Características de la Programación Funcional</li>
                    <li>Ejercicios Prácticos</li>
                </ol>
            </section>

            <!-- 1. Funciones: Matemáticas vs Programación -->
            <section>
                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-function"></i> Funciones en Programación</h2>
                    <div class="concept-box">
                        <strong>Definición:</strong> Una función es una porción de código separada capaz de 
                        causar algún efecto o evaluar un valor.
                    </div>
                    <div class="two-columns">
                        <div>
                            <h4>Tipos de funciones:</h4>
                            <ul>
                                <li>Del lenguaje (built-in)</li>
                                <li>De módulos/bibliotecas</li>
                                <li>Creadas por el programador</li>
                            </ul>
                        </div>
                        <div>
                            <h4>Sintaxis básica:</h4>
                            <pre><code class="language-javascript">function nombreFuncion(parametros) {
    // código
    return valor;
}</code></pre>
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-balance-scale"></i> Matemáticas vs Programación</h2>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Aspecto</th>
                                <th>Funciones Matemáticas</th>
                                <th>Funciones en Programación</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Efectos</strong></td>
                                <td>Solo evalúan valores</td>
                                <td>Pueden causar efectos secundarios</td>
                            </tr>
                            <tr>
                                <td><strong>Dominio</strong></td>
                                <td>Infinito (números reales)</td>
                                <td>Limitado por arquitectura</td>
                            </tr>
                            <tr>
                                <td><strong>Pureza</strong></td>
                                <td>Siempre puras</td>
                                <td>Pueden ser puras o impuras</td>
                            </tr>
                            <tr>
                                <td><strong>Estado</strong></td>
                                <td>No modifican estado</td>
                                <td>Pueden modificar variables</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="concept-box">
                        <strong>Objetivo de la PF:</strong> Cerrar esta brecha imitando el comportamiento 
                        de las funciones matemáticas.
                    </div>
                </section>
            </section>

            <!-- 2. Programación Funcional -->
            <section>
                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-code"></i> Programación Funcional</h2>
                    <div class="concept-box">
                        <strong>Definición:</strong> Paradigma declarativo que se enfoca en describir 
                        <em>qué</em> queremos lograr, no <em>cómo</em> lograrlo.
                    </div>
                    <div class="two-columns">
                        <div>
                            <h4>Origen histórico:</h4>
                            <ul>
                                <li>Cálculo Lambda (λ)</li>
                                <li>Alonzo Church (años 30)</li>
                                <li>Anterior a las computadoras</li>
                            </ul>
                        </div>
                        <div>
                            <h4>Principios clave:</h4>
                            <ul>
                                <li>Funciones como ciudadanos de primera clase</li>
                                <li>Inmutabilidad</li>
                                <li>Ausencia de efectos secundarios</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-language"></i> Lenguajes Funcionales</h2>
                    <div class="two-columns">
                        <div>
                            <h4>Puramente funcionales:</h4>
                            <ul>
                                <li><strong>Haskell</strong> - Referencia académica</li>
                                <li><strong>LISP</strong> - Pionero histórico</li>
                                <li><strong>Scheme</strong> - Minimalista</li>
                            </ul>
                        </div>
                        <div>
                            <h4>Multiparadigma (impuros):</h4>
                            <ul>
                                <li><strong>JavaScript</strong> - Web development</li>
                                <li><strong>Python</strong> - Data science</li>
                                <li><strong>Scala</strong> - JVM + funcional</li>
                                <li><strong>F#</strong> - .NET funcional</li>
                            </ul>
                        </div>
                    </div>
                </section>
            </section>

            <!-- 3. Funciones Puras -->
            <section>
                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-gem"></i> Funciones Puras</h2>
                    <div class="concept-box">
                        <strong>Definición:</strong> Función que para un mismo conjunto de parámetros 
                        siempre produce el mismo resultado y no tiene efectos secundarios.
                    </div>
                    <h3>Características esenciales:</h3>
                    <div class="two-columns">
                        <div class="example-box">
                            <h4>1. Determinismo</h4>
                            <p>Mismos parámetros → Mismo resultado</p>
                        </div>
                        <div class="example-box">
                            <h4>2. Sin efectos secundarios</h4>
                            <p>No modifica estado externo</p>
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-check-circle"></i> Ejemplo: Función Pura</h2>
                    <pre><code class="language-javascript">// ✅ FUNCIÓN PURA
const aplicarDescuento = (precio, porcentaje) => {
    return precio * (1 - porcentaje);
};

// Siempre produce el mismo resultado
console.log(aplicarDescuento(100, 0.2)); // 80
console.log(aplicarDescuento(100, 0.2)); // 80
console.log(aplicarDescuento(100, 0.2)); // 80</code></pre>
                    <div class="example-box">
                        <strong>¿Por qué es pura?</strong>
                        <ul>
                            <li>Solo depende de sus parámetros</li>
                            <li>No modifica variables externas</li>
                            <li>No realiza operaciones de I/O</li>
                            <li>Resultado predecible y consistente</li>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-times-circle"></i> Ejemplo: Función Impura</h2>
                    <pre><code class="language-javascript">// ❌ FUNCIÓN IMPURA
let totalCarrito = 0;

const agregarAlCarrito = (precio) => {
    totalCarrito += precio; // ¡Efecto secundario!
    console.log(`Total: ${totalCarrito}`); // ¡Otro efecto!
    return totalCarrito;
};

// Produce resultados diferentes
console.log(agregarAlCarrito(25)); // 25
console.log(agregarAlCarrito(25)); // 50
console.log(agregarAlCarrito(25)); // 75</code></pre>
                    <div class="warning-box">
                        <strong>¿Por qué es impura?</strong>
                        <ul>
                            <li>Modifica variable global <code>totalCarrito</code></li>
                            <li>Usa <code>console.log</code> (efecto secundario)</li>
                            <li>Resultado depende del estado previo</li>
                            <li>No es predecible ni consistente</li>
                        </ul>
                    </div>
                </section>

                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-ban"></i> Efectos Secundarios Prohibidos</h2>
                    <div class="two-columns">
                        <div>
                            <h4>❌ No permitido:</h4>
                            <ul>
                                <li>Modificar variables globales</li>
                                <li>Cambiar bases de datos</li>
                                <li>Crear/modificar archivos</li>
                                <li>Interactuar con red</li>
                                <li>Usar <code>console.log</code></li>
                                <li>Modificar parámetros</li>
                            </ul>
                        </div>
                        <div>
                            <h4>✅ Permitido:</h4>
                            <ul>
                                <li>Leer parámetros</li>
                                <li>Crear variables locales</li>
                                <li>Llamar otras funciones puras</li>
                                <li>Realizar cálculos</li>
                                <li>Retornar valores</li>
                                <li>Crear nuevos objetos/arrays</li>
                            </ul>
                        </div>
                    </div>
                </section>
            </section>

            <!-- 4. Funciones vs Métodos -->
            <section>
                <h2 class="icon-title"><i class="fa-solid fa-code-compare"></i> Funciones vs Métodos</h2>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Característica</th>
                            <th>Función</th>
                            <th>Método</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Pertenencia</strong></td>
                            <td>No pertenece a ningún dato</td>
                            <td>Pertenece a una clase/objeto</td>
                        </tr>
                        <tr>
                            <td><strong>Invocación</strong></td>
                            <td><code>resultado = funcion(arg)</code></td>
                            <td><code>resultado = objeto.metodo(arg)</code></td>
                        </tr>
                        <tr>
                            <td><strong>Parámetro self</strong></td>
                            <td>No requerido</td>
                            <td>Obligatorio (acceso al objeto)</td>
                        </tr>
                        <tr>
                            <td><strong>Estado</strong></td>
                            <td>No cambia estado de entidades</td>
                            <td>Puede cambiar estado del objeto</td>
                        </tr>
                    </tbody>
                </table>
                <div class="example-box">
                    <strong>Ejemplo:</strong> <code>Math.max(5, 10)</code> es función, 
                    <code>array.push(item)</code> es método.
                </div>
            </section>

            <!-- 5. Características de la PF -->
            <section>
                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-star"></i> Características Clave de la PF</h2>
                    <div class="concept-box">
                        Para dominar la programación funcional, debemos entender estos conceptos fundamentales:
                    </div>
                </section>

                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-layer-group"></i> 1. Funciones de Orden Superior</h2>
                    <div class="concept-box">
                        <strong>Definición:</strong> Funciones que aceptan otras funciones como argumentos 
                        y/o devuelven funciones.
                    </div>
                    <pre><code class="language-javascript">// Función de orden superior
const aplicarOperacion = (numeros, operacion) => {
    return numeros.map(operacion);
};

// Funciones que se pasan como argumentos
const duplicar = x => x * 2;
const elevarAlCuadrado = x => x * x;

const numeros = [1, 2, 3, 4];
console.log(aplicarOperacion(numeros, duplicar));        // [2, 4, 6, 8]
console.log(aplicarOperacion(numeros, elevarAlCuadrado)); // [1, 4, 9, 16]</code></pre>
                </section>

                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-lock"></i> 2. Inmutabilidad</h2>
                    <div class="concept-box">
                        <strong>Principio:</strong> Los valores no pueden cambiar una vez creados. 
                        Para "modificar", se crea una nueva estructura.
                    </div>
                    <div class="two-columns">
                        <div>
                            <h4>❌ Mutación (imperativo):</h4>
                            <pre><code class="language-javascript">const numeros = [1, 2, 3];
numeros.push(4); // Modifica original
console.log(numeros); // [1, 2, 3, 4]</code></pre>
                        </div>
                        <div>
                            <h4>✅ Inmutable (funcional):</h4>
                            <pre><code class="language-javascript">const numeros = [1, 2, 3];
const nuevos = [...numeros, 4]; // Crea nuevo
console.log(numeros); // [1, 2, 3]
console.log(nuevos);  // [1, 2, 3, 4]</code></pre>
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-sync"></i> 3. Recursión</h2>
                    <div class="concept-box">
                        <strong>Concepto:</strong> En lugar de bucles, la PF usa recursión - 
                        funciones que se llaman a sí mismas.
                    </div>
                    <pre><code class="language-javascript">// Ejemplo: Factorial recursivo
const factorial = (n) => {
    // Caso base (condición de parada)
    if (n <= 1) return 1;
    
    // Llamada recursiva
    return n * factorial(n - 1);
};

console.log(factorial(5)); // 120 (5 * 4 * 3 * 2 * 1)</code></pre>
                    <div class="warning-box">
                        <strong>Importante:</strong> Siempre definir un caso base para evitar recursión infinita.
                    </div>
                </section>

                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-puzzle-piece"></i> 4. Currificación</h2>
                    <div class="concept-box">
                        <strong>Definición:</strong> Transformar una función con múltiples argumentos 
                        en una secuencia de funciones con un solo argumento.
                    </div>
                    <pre><code class="language-javascript">// Función normal
const sumar = (a, b, c) => a + b + c;

// Función currificada
const sumarCurry = (a) => (b) => (c) => a + b + c;

// Uso normal
console.log(sumar(1, 2, 3)); // 6

// Uso currificado (aplicación parcial)
const sumarUno = sumarCurry(1);
const sumarUnoYDos = sumarUno(2);
console.log(sumarUnoYDos(3)); // 6

// O en una línea
console.log(sumarCurry(1)(2)(3)); // 6</code></pre>
                </section>
            </section>

            <!-- 6. Ejercicios Prácticos -->
            <section>
                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-dumbbell"></i> Ejercicios Prácticos</h2>
                    <div class="concept-box">
                        Vamos a aplicar los conceptos aprendidos con ejemplos concretos que demuestran 
                        la diferencia entre programación imperativa y funcional.
                    </div>
                </section>

                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-calculator"></i> Fibonacci Recursivo</h2>
                    <div class="concept-box">
                        <strong>Problema:</strong> Calcular el n-ésimo número de la serie Fibonacci, 
                        donde cada número es la suma de los dos anteriores.
                    </div>
                    <pre><code class="language-javascript">// Implementación recursiva básica
const fibonacci = (n) => {
    if (n < 2) return 1;
    return fibonacci(n - 1) + fibonacci(n - 2);
};

// Implementación optimizada con memoización
const fibonacciMemo = (n, cache = {}) => {
    if (n < 2) return 1;
    if (cache[n]) return cache[n];
    
    cache[n] = fibonacciMemo(n - 1, cache) + fibonacciMemo(n - 2, cache);
    return cache[n];
};

console.log(fibonacci(10));     // 89 (lento)
console.log(fibonacciMemo(10)); // 89 (rápido)</code></pre>
                </section>

                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-arrows-rotate"></i> Refactorización: Suma de Pares</h2>
                    <div class="concept-box">
                        <strong>Problema:</strong> Sumar todos los números pares de una lista.
                    </div>
                    <div class="two-columns">
                        <div>
                            <h4>❌ Solución Imperativa:</h4>
                            <pre><code class="language-javascript">function sumarParesImperativo(lista) {
    let resultado = 0;
    for (let i = 0; i < lista.length; i++) {
        if (lista[i] % 2 === 0) {
            resultado += lista[i];
        }
    }
    return resultado;
}</code></pre>
                        </div>
                        <div>
                            <h4>✅ Solución Funcional:</h4>
                            <pre><code class="language-javascript">const sumarParesFuncional = (lista) =>
    lista
        .filter(num => num % 2 === 0)
        .reduce((acc, num) => acc + num, 0);

// Uso
const numeros = [1, 2, 3, 4, 5, 6];
console.log(sumarParesFuncional(numeros)); // 12</code></pre>
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-lambda"></i> Expresiones Lambda</h2>
                    <div class="concept-box">
                        <strong>Definición:</strong> Funciones anónimas que se definen inline, 
                        especialmente útiles con funciones de orden superior.
                    </div>
                    <pre><code class="language-javascript">const numeros = [1, 2, 3, 4, 5];

// Usando lambdas (arrow functions) con map
const cuadrados = numeros.map(x => x * x);
console.log(cuadrados); // [1, 4, 9, 16, 25]

// Usando lambdas con filter
const pares = numeros.filter(x => x % 2 === 0);
console.log(pares); // [2, 4]

// Usando lambdas con reduce
const suma = numeros.reduce((acc, x) => acc + x, 0);
console.log(suma); // 15

// Lambda más compleja
const productos = [
    { nombre: "Laptop", precio: 1000 },
    { nombre: "Mouse", precio: 25 }
];

const productosCaros = productos
    .filter(p => p.precio > 50)
    .map(p => ({ ...p, conDescuento: p.precio * 0.9 }));
</code></pre>
                </section>

                <section>
                    <h2 class="icon-title"><i class="fa-solid fa-link"></i> Composición de Funciones</h2>
                    <div class="concept-box">
                        <strong>Concepto:</strong> Combinar funciones simples para crear funciones más complejas.
                    </div>
                    <pre><code class="language-javascript">// Funciones puras simples
const normalizar = (texto) => texto.trim().toLowerCase();
const capitalizar = (texto) => texto[0].toUpperCase() + texto.slice(1);
const agregarPrefijo = (prefijo) => (texto) => `${prefijo} ${texto}`;

// Composición manual
const procesarNombre = (nombre) => {
    const normalizado = normalizar(nombre);
    const capitalizado = capitalizar(normalizado);
    return agregarPrefijo("Sr.")(capitalizado);
};

// Uso
console.log(procesarNombre("  JUAN  ")); // "Sr. Juan"

// Composición con pipe (más avanzado)
const pipe = (...funciones) => (valor) => 
    funciones.reduce((acc, fn) => fn(acc), valor);

const procesarNombrePipe = pipe(
    normalizar,
    capitalizar,
    agregarPrefijo("Sr.")
);

console.log(procesarNombrePipe("  MARIA  ")); // "Sr. Maria"</code></pre>
                </section>
            </section>

            <!-- Resumen -->
            <section>
                <h2 class="icon-title"><i class="fa-solid fa-check-double"></i> Resumen</h2>
                <div class="two-columns">
                    <div>
                        <h4>Conceptos clave aprendidos:</h4>
                        <ul>
                            <li>Diferencias entre funciones matemáticas y de programación</li>
                            <li>Funciones puras vs impuras</li>
                            <li>Inmutabilidad y ausencia de efectos secundarios</li>
                            <li>Funciones de orden superior</li>
                            <li>Recursión como alternativa a bucles</li>
                            <li>Currificación y aplicación parcial</li>
                        </ul>
                    </div>
                    <div>
                        <h4>Beneficios de la PF:</h4>
                        <ul>
                            <li>Código más predecible y testeable</li>
                            <li>Menor cantidad de bugs</li>
                            <li>Facilita la concurrencia</li>
                            <li>Código más expresivo y declarativo</li>
                            <li>Reutilización mediante composición</li>
                            <li>Razonamiento matemático sobre el código</li>
                        </ul>
                    </div>
                </div>
                <div class="concept-box">
                    <strong>Próximos pasos:</strong> Practicar con ejercicios de refactorización 
                    y explorar bibliotecas funcionales como Ramda o Lodash/FP.
                </div>
            </section>

            <!-- Fin -->
            <section data-background="linear-gradient(135deg, rgba(0,63,114,0.1) 0%, rgba(233,171,33,0.1) 100%)">
                <h1>¡Gracias!</h1>
                <h3>¿Preguntas?</h3>
                <div class="concept-box">
                    <strong>Recuerda:</strong> La programación funcional es una herramienta poderosa. 
                    Practica con ejemplos pequeños antes de aplicarla a proyectos grandes.
                </div>
            </section>

        </div>
    </div>

    <!-- Reveal.js Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/dist/reveal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/plugin/highlight/highlight.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/plugin/notes/notes.js"></script>
    
    <script>
        Reveal.initialize({
            hash: true,
            transition: 'slide',
            transitionSpeed: 'default',
            backgroundTransition: 'fade',
            plugins: [RevealHighlight, RevealNotes],
            highlight: {
                highlightOnLoad: true
            }
        });
    </script>
</body>
</html>